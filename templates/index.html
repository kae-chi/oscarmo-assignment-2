<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMeans Clustering</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>KMeans Clustering Visualization</h1>
    <div class="controls">
      <label for="clusters">Number of Clusters (k):</label>
      <input type="number" id="clusters" value="2" min="1">
  </div>
    <div id="controls">
        <label for="initMethod">Initialization Method:</label>
        <select id="initMethod">
            <option value="random">Random</option>
            <option value="farthest_first">Farthest First</option>
            <option value="kmeans++">KMeans++</option>
            <option value="manual">Manual</option>
        </select>
        <button id="generateDataset">Generate Dataset</button>
        <button id="step">Step</button>
        <button id="converge">Converge</button>
        <button id="reset">Reset</button>
    </div>
    <div id="plot" style="width:100%;height:500px;"></div>
    <script>
        let data = generateRandomDataset();
        let centroids = [];
        let method = 'random';

        document.getElementById('initMethod').onchange = (event) => {
            method = event.target.value;
        };

        document.getElementById('generateDataset').onclick = () => {
            data = generateRandomDataset();
            centroids = [];
            updatePlot();
        };

        document.getElementById('step').onclick = () => {
            // Call backend or JS logic for one step of KMeans
        };

        document.getElementById('converge').onclick = () => {
            // Call backend or JS logic for running to convergence
        };

        document.getElementById('reset').onclick = () => {
            centroids = [];
            updatePlot();
        };

        // Function to update the Plotly graph
        function updatePlot() {
            let trace = {
                x: data.map(d => d[0]),
                y: data.map(d => d[1]),
                mode: 'markers',
                marker: { size: 8 }
            };
            
            let layout = {
                title: 'KMeans Clustering with Negative Values',
                xaxis: { title: 'X-Axis', range: [-1, 1] },
                yaxis: { title: 'Y-Axis', range: [-1, 1] },
                showlegend: false
            };
            
            Plotly.newPlot('plot', [trace], layout);
        }

        // Generate random dataset with values between -1 and 1
        function generateRandomDataset() {
            let dataset = [];
            for (let i = 0; i < 500; i++) {
                let x = Math.random() * 2 - 1; // Generates a value between -1 and 1
                let y = Math.random() * 2 - 1; // Generates a value between -1 and 1
                dataset.push([x, y]);
            }
            return dataset;
        }

        // Initial plot
        updatePlot();
    </script>
</body>
</html>
